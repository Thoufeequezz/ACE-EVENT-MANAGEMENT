<!DOCTYPE html>
<html lang="en">
    
  <head>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %></title>

    <!-- Clerk SDK -->
    <script
      async
      crossorigin="anonymous"
      data-clerk-publishable-key="<%= clerkKey %>"
      src="https://present-frog-22.clerk.accounts.dev/npm/@clerk/clerk-js@5/dist/clerk.browser.js"
      type="text/javascript">
    </script>

    <!-- Tailwind + Fonts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
    
    <!-- CSS -->
    <link rel="stylesheet" href="/css/main.css">

    <!-- Razorpay -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

  </head>

  <body id= home class="bg-gray-900 text-gray-100">

    <!-- Navbar -->
    <nav class="bg-gray-900/80 backdrop-blur-md sticky top-0 z-50 border-b border-gray-800">
      <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
        <a  onclick="document.getElementById('home').scrollIntoView({ behavior: 'smooth' })">
          <img src="<%= logoPath %>" alt="ACE Logo" class="h-14 w-auto scale-125 logo-white">
        </a>
        <ul id="navbarLinks" class="hidden md:flex space-x-10 font-medium items-center">
          <% navItems.forEach(item => { %>
            <li>
              <a href="<%= item.href %>" id="<%= item.id %>" onclick=<%= item.func %> class="flex items-center">
                <%= item.text %>
                <% if(item.icon) { %>
                  <%- item.icon %> 
                <% } %>
              </a>
            </li>
          <% }) %>
        </ul>


        <!-- search bar -->
        <div id="navbarSearchContainer" class="hidden flex-1 flex justify-center px-4 md:px-0 items-center">
          <div class="w-full max-w-md relative">
            <!-- Input -->
            <input
              type="text"
              id="navbarSearchInput"
              placeholder="Search events..."
              class="w-full pl-4 pr-12 py-2 rounded-full bg-gray-800 text-gray-100 placeholder-gray-400 border border-gray-700 shadow-sm
                    focus:outline-none focus:border-black focus:ring-0 transition-colors duration-200"
            />

            <!-- Search Button inside input -->
            <button
              id="navbarSearchBtn"
              class="absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-100 hover:text-white"
              onclick="alert('searched')"
            >
              <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 1110.5 3a7.5 7.5 0 016.15 13.65z" />
              </svg>
            </button>
          </div>

          <!-- Close button outside input container -->
          <button
            id="navbarSearchClose"
            class="ml-0 px-3 py-2 bg-transparent  rounded-full text-gray-100 font-semibold shadow"
            onclick="toggle_search_bar()"
          >
            ✕
          </button>
        </div>




        <!-- Auth Area -->
        <div class="hidden md:flex space-x-4 items-center w-[160px] justify-end">
          <div id="clerk-user-button" class="hidden"></div>
          <button id="login-fallback" class="glossy-btn-outline">Login</button>
          <button id="signup-fallback" class="glossy-btn">Signup</button>
        </div>
        <button class="md:hidden text-gray-100 focus:outline-none">☰</button>
      </div>
    </nav>

    <!-- Mobile Side Navbar -->
    <div id="mobile-sidenav" class="fixed top-0 left-[-100%] w-64 h-full bg-gray-900 shadow-lg z-50 transition-left duration-300">
        <div class="p-6 flex justify-between items-center border-b border-gray-800">
            <h2 class="text-xl font-bold">ACE</h2>
            <button id="close-sidenav" class="text-gray-100 focus:outline-none text-2xl">&times;</button>
        </div>
        <div class="mt-6 px-8">
          <div id="clerk-user-button-mobile" class="hidden"></div>
        </div>
        <ul class="mt-6 flex flex-col gap-4 px-4">
            <% navItems.forEach(item => { %>
            <li><a href="<%= item.href %>" class="block py-2 px-3 rounded hover:bg-gray-800" onclick=<%= item.func %>><%= item.text %></a></li>
            <% }) %>
        </ul>
        
        <!-- Mobile Auth Buttons -->
        <div class="mt-6 flex flex-col gap-2 px-4">
          <button id="login-fallback-mobile" class="glossy-btn-outline w-full">Login</button>
          <button id="signup-fallback-mobile" class="glossy-btn w-full">Signup</button>
        </div>
    </div>

    <!-- Hero / Slider -->
    <section class="relative h-[500px] flex items-center justify-center overflow-hidden">
      <% heroSlides.forEach((slide, i) => { %>
        <img src="<%= slide %>" class="hero-slide <%= i === 0 ? 'active' : '' %>" alt="slide<%= i+1 %>">
      <% }) %>
      <div class="absolute inset-0 bg-gradient-to-b from-black/70 to-transparent"></div>
      <div class="relative text-center px-6">
        <h1 class="text-4xl md:text-6xl font-bold mb-4"><%= heroTitle %></h1>
        <p class="text-lg md:text-xl mb-6 text-gray-300"><%= heroSubtitle %></p>
        <div class="space-x-4">
          <button class="glossy-btn" onclick="document.getElementById('events').scrollIntoView({ behavior: 'smooth' })"> <%= heroBtn1 %> </button>
          <button class="glossy-btn-outline"><%= heroBtn2 %></button>
        </div>
      </div>
    </section>

    <!-- Events Section -->
    <section id="events" class="max-w-7xl mx-auto my-16 px-6">
      <h2 class="text-3xl font-bold mb-8 text-center">Featured Events</h2>
      <div class="grid md:grid-cols-3 gap-8">
        <% events.forEach(event => { %>
          <div class="bg-gray-800 rounded-2xl shadow-lg overflow-hidden hover:shadow-xl hover:scale-105 transition">
            <img src="<%= event.IMAGE || 'event_images/default.png' %>" 
                class="w-full h-48 object-cover" 
                alt="<%= event.TITLE %>">
            <div class="p-5">
              <h3 class="text-xl font-semibold mb-2"><%= event.TITLE %></h3>
              <p class="text-gray-300 mb-4">
                Fee: <%= event.FEE === 0 ? "FREE" : "₹" + event.FEE %> | Status: <%= event.EVENTSTATUS %>
              </p>
              <p class="text-gray-300 mb-4">
                Date: <%= new Date(event.STARTDATE).toLocaleDateString() %> - <%= new Date(event.ENDDATE).toLocaleDateString() %>
              </p>
              <p class="text-gray-300 mb-4">
                Venue: <%= event.VENUE %> | Type: <%= event.EVENTTYPE %>
              </p>
              <button
                class="glossy-btn w-full view-btn"
                data-event-id="<%= event.EVENTID %>"
                data-title="<%= event.TITLE %>"
                data-desc="<%= event.DESCRIPTION %>"
                data-image="<%= event.IMAGE || 'event_images/default.png' %>"
                data-fee="<%= event.FEE %>"
                data-start="<%= new Date(event.STARTDATE).toLocaleDateString() %>"
                data-end="<%= new Date(event.ENDDATE).toLocaleDateString() %>"
                data-venue="<%= event.VENUE %>"
                data-type="<%= event.EVENTTYPE %>"
              >
                View Details
              </button>
            </div>
          </div>
        <% }) %>
      </div>
    </section>

    <!-- Modern Event Modal -->
    <div id="eventModal" class="fixed inset-0 bg-black/80 backdrop-blur-sm hidden z-50 overflow-auto">
      <div class="max-w-3xl mx-auto my-16 bg-gray-900 rounded-3xl shadow-2xl overflow-hidden relative p-8 flex flex-col">
        
        <!-- Close Button -->
        <button id="closeModal" class="absolute top-4 right-4 text-gray-200 text-3xl hover:text-white z-50">&times;</button>

        <!-- Event Content -->
        <div class="flex flex-col gap-6">
          <h2 id="modalTitle" class="text-4xl font-bold text-gray-100"></h2>
          <p id="modalDesc" class="text-gray-300 leading-relaxed text-lg max-h-[400px] overflow-y-auto"></p>

          <div class="text-gray-400 space-y-2">
            <p id="modalFee"></p>
            <p id="modalDate"></p>
            <p id="modalVenue"></p>
          </div>

        <!-- Terms & Register -->
        <div class="flex flex-col gap-4 mt-4">
          <label class="inline-flex items-center cursor-pointer select-none gap-3">
            <input type="checkbox" id="agreeTerms" class="w-5 h-5 text-gray-200 bg-gray-700 border border-gray-600 rounded-lg transition duration-200 checked:bg-gray-500 checked:border-gray-400">
            
            <span class="text-gray-300">
              I agree to the terms and conditions mentioned above.</a>
            </span>
          </label>

          <button id="registerBtn" class="glossy-btn w-full py-3 text-lg font-semibold hover:scale-105 transition-transform disabled:opacity-50 disabled:cursor-not-allowed" disabled>
            Register
          </button>
        </div>

        </div>
      </div>
    </div>

    <!-- About -->
    <section id="about" class="bg-gray-800 py-16">
      <div class="max-w-6xl mx-auto px-6 text-center">
        <h2 class="text-3xl font-bold mb-6">About Us</h2>
        <p class="text-gray-400 max-w-2xl mx-auto"><%= aboutText %></p>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="bg-gray-900 py-16">
      <div class="max-w-6xl mx-auto px-6">
        <h2 class="text-3xl font-bold mb-6 text-center">Contact Us</h2>
        <form class="max-w-2xl mx-auto space-y-4" method="post" action="/contact">
          <input type="text" name="name" placeholder="Your Name" class="w-full p-3 bg-gray-800 border border-gray-700 rounded-lg text-gray-100">
          <input type="email" name="email" placeholder="Your Email" class="w-full p-3 bg-gray-800 border border-gray-700 rounded-lg text-gray-100">
          <textarea name="message" rows="4" placeholder="Your Message" class="w-full p-3 bg-gray-800 border border-gray-700 rounded-lg text-gray-100"></textarea>
          <button class="glossy-btn w-full">Send Message</button>
        </form>
      </div>
    </section>

    <!-- Logged-in User Info -->
    <div id="userInfo" class="max-w-7xl mx-auto px-6 py-4 text-center text-gray-300 hidden">
      Logged in as: <span id="userId"></span>
    </div>
    
    <footer class="bg-gray-950 text-gray-400 py-6 text-center border-t border-gray-800">
      <p>&copy; <%= new Date().getFullYear() %> ACE - Association of CSE. All rights reserved.</p>
    </footer>

        <!-- Alert Overlay -->
    <div id="alertOverlay" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
      <div id="alertBox" class="bg-gray-800 text-gray-100 p-6 rounded-2xl shadow-xl text-center max-w-sm w-full">
        <h3 id="alertTitle" class="text-xl font-semibold mb-2">Alert</h3>
        <p id="alertMessage" class="text-gray-300 mb-4">This is a sample message.</p>
        <button id="alertClose" class="glossy-btn px-4 py-2">OK</button>
      </div>
    </div>

    <!-- Confirm Overlay -->
    <div id="confirmOverlay" class="hidden fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
      <div id="confirmBox" class="bg-gray-800 text-gray-100 p-6 rounded-2xl shadow-xl text-center max-w-sm w-full">
        <h3 id="confirmTitle" class="text-xl font-semibold mb-2">Confirm</h3>
        <p id="confirmMessage" class="text-gray-300 mb-4">Are you sure?</p>
        <div class="flex justify-center gap-4">
          <button id="confirmYes" class="glossy-btn px-4 py-2">Yes</button>
          <button id="confirmNo" class="glossy-btn-outline px-4 py-2">No</button>
        </div>
      </div>
    </div>

    <script src="/javascript/signup_btn_init.js" type="module"></script>
    <script src="javascript/main.js"></script>

  </body>
  <!-- 
        █████ ███████████  ███████████     █████████   █████   █████ █████ ██████   ██████ ™
        ░███ ░░███░░░░░███░░███░░░░░███   ███░░░░░███ ░░███   ░░███ ░░███ ░░██████ ██████ 
        ░███  ░███    ░███ ░███    ░███  ░███    ░███  ░███    ░███  ░███  ░███░█████░███ 
        ░███  ░██████████  ░██████████   ░███████████  ░███████████  ░███  ░███░░███ ░███ 
        ░███  ░███░░░░░███ ░███░░░░░███  ░███░░░░░███  ░███░░░░░███  ░███  ░███ ░░░  ░███ 
        ░███  ░███    ░███ ░███    ░███  ░███    ░███  ░███    ░███  ░███  ░███      ░███ 
        █████ ███████████  █████   █████ █████   █████ █████   █████ █████ █████     █████
        ░░░░░ ░░░░░░░░░░░  ░░░░░   ░░░░░ ░░░░░   ░░░░░ ░░░░░   ░░░░░ ░░░░░ ░░░░░     ░░░░░ 
                                                                                                                                                                
        -->       
</html>
